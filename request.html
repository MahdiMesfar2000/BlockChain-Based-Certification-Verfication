<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./css/loader.css" />

    <link href="css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="css/table.css" />
    <script src="js/App.js"></script>

    <script src="node_modules\web3\dist\web3.min.js"></script>
    <link href="./css/aos.min.css" rel="stylesheet" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
      integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="css/main.css" />
    <link rel="icon" href="/files/logo diplomi icon.svg" />
    <title>Request</title>
  </head>

  <body>
    <canvas id="canvas1"></canvas>
    <script src="js/animation.js"></script>
    <div class="loader-wraper">
      <div class="lds-roller">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
      </div>
    </div>
    <div>
      <i
        onclick="topFunction()"
        id="scroll-btn"
        class="fa-solid fa-angle-up"
      ></i>
    </div>
    <!-----------------------------MODAL Start-------------------->
    <div
      class="modal fade"
      id="myModal"
      tabindex="-1"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="exampleModalLabel">Modal title</h1>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">...</div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Close
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-----------------------------navbBar Start-------------------->
    <!--NavBar Start-->
    <nav class="navbar navbar-expand-lg navbar-light bg-light py-3 navbar-dark">
      <div class="container">
        <img
          src="files/logo diplomi.svg"
          alt="logo"
          style="width: 10%; height: 10%; margin-right: 1em"
        />

        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a
                class="nav-link"
                id="Home"
                aria-current="page"
                href="index.html"
                >Home</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link d-none" id="Upload" href="upload.html"
                >Upload
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="Verify" href="verify.html">Verify </a>
            </li>

            <li class="nav-item">
              <a class="nav-link d-none" id="Delete" href="delete.html"
                >Revoke</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link d-none" id="Admin" href="admin.html">Admin</a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link d-none"
                id="certificates"
                href="certificates.html"
                >Certificates</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link active" id="request" href="request.html"
                >Request
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="Team" href="about.html">Team</a>
            </li>
          </ul>

          <div class="d-flex">
            <button
              id="loginButton"
              onclick="connect()"
              class="btn main-button"
            >
              Login
            </button>
            <button
              id="logoutButton"
              onclick="disconnect()"
              class="btn main-button"
            >
              Logout
            </button>
          </div>
        </div>
      </div>
    </nav>
    <!---------------------NavBar End-------------------->

    <!--=====================Upload Document===========================-->
    <div class="container">
      <div class="alert alert-danger d-none mt-2">
        Please download MetaMask at
        <a target="_blank" href="https://metamask.io/download">Metamask Site</a>
      </div>
      <div class="row content m-1">
        <div data-aos="zoom-in" class="col-lg-6 py-3 data-upload my-3 mx-md-2">
          <input
            id="Exporter-Req-address"
            type="text"
            placeholder="Exporter Address"
            required
          />
          <input type="text" id="name" placeholder="Univesity Name" required />
          <input
            type="text"
            id="localisation"
            placeholder="Localisation"
            required
          />
          <input type="text" id="site" placeholder="Web Site" required />

          <span id="note" class="text-danger"></span>
          <img id="loader" class="d-none" src="files/loader.svg" alt="loader" />
          <div class="btn-container mt-3">
            <input
              onclick="RequestExporter()"
              class="btn exporter-button main-button"
              type="submit"
              value="Request to add"
              id="RequestBtn"
            />
          </div>
        </div>
      </div>
    </div>
    <!--=====================Footer===========================-->
    <!-- <div class="footer-dark">
      <footer>
        <div class="container">
          <div class="row">
            <div class="col-sm-6 col-md-3 item">
              <h3   data-aos="fade-right">Services</h3>
              <ul  data-aos="zoom-in">
                <li><a href="#">Ethereum</a></li>
                <li><a href="#">Blockchain Tech.</a></li>
                <li><a href="#">Smart Contracts </a></li>
              </ul>
            </div>
            <div class="col-sm-6 col-md-3 item">
              <h3   data-aos="fade-right">About us</h3>
              <ul  data-aos="zoom-in">
                <li><a href="#">Company</a></li>
                <li><a href="#">Team</a></li>
              </ul>
            </div>
            <div class="col-md-6 item text">
              <h3  data-aos="fade-right"> 
                 <i class="fa-solid fa-dragon"></i>
                OrioChain</h3>
              <p  data-aos="zoom-in">
                Praesent sed lobortis mi. Suspendisse vel placerat ligula.
                Vivamus ac sem lacus. Ut vehicula rhoncus elementum. Etiam quis
                tristique lectus. Aliquam in arcu eget velit pulvinar dictum vel
                in justo.
              </p>
            </div>
            <div class="col-md text-center text-md-start">
              <h3 data-aos="fade-right">Credits</h3>
              <ul data-aos="zoom-in">
                <li>
                  <a
                    href="https://undraw.co/illustrations"
                    title="Indraw illustrations"
                    >Blockchain illustrations created by undraw</a
                  >
                </li>
                <li>
                  <a href='https://www.freepik.com/vectors/futuristic-background'>Futuristic background vector created by freepik - www.freepik.com</a>
                </li>
                <li>
                  <a href='https://www.freepik.com/vectors/tech-world'>Tech world vector created by liuzishan - www.freepik.com</a>
                </li>
                <li>
                 <a href="https://unsplash.com/@theshubhamdhage?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText"> Photo by Shubham Dhage</a> on <a href="https://unsplash.com/s/photos/blockchain?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Unsplash</a>
    
                </li>
                <li>
                  <a href="https://www.flaticon.com/free-icons/wings" title="wings icons">Wings icons created by Freepik - Flaticon</a>
                </li>
                <li>
                  <a href="https://loading.io/icon/">Icon Loading  loading.io</a>  
                </li>
              </ul>
            </div>
            <div  data-aos="zoom-in" class="col item social">
              <a href="#"><i class="fa-brands fa-facebook"></i></a>
              <a href="#"><i class="fa-brands fa-twitter"></i> </a
              ><a href="#"><i class="fa-brands fa-github"> </i></a>
              <a href="#"><i class="fa-brands fa-instagram"> </i> </a>
            </div>
          </div>
          <p class="copyright">OrioChain Â© 2022</p>
        </div>
  
      </footer>
    </div> -->
    <div>
      <a href="diplomi@gmail.com?subject=From Diplomi Site">
        <i class="mail-us fa-solid fa-headset"></i>
      </a>
    </div>

    <script src="./js/aos.js"></script>
    <script src="./js/script.js"></script>
    <script
      src="https://code.jquery.com/jquery-3.6.0.js"
      integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="node_modules\web3\dist\web3.min.js"></script>

    <!--=====================Start Code===========================-->
    <script defer>
      document.getElementById("Exporter-Req-address").onclick = () => {
        $("#note").html(``);
        $("#ExporterBtn").attr("disabled", false);
        $("#edit").attr("disabled", false);
        $("#delete").attr("disabled", false);
      };

      function Table(data) {
        for (var i = 0; i < data.length; i++) {
          if (data[i].pending === "1") {
            var table2 = document.getElementById("myTable2");
            var row = `<tr>
            <td>${data[i].public_key}</td>
            <td>${data[i].nom}</td>
            <td>${data[i].localisation}</td>
            <td>${data[i].site}</td>
            <td><button
    onclick='RejectExporter(${JSON.stringify(data[i].public_key)})'
                class='btn btn-warning  exporter-button main-button'
                type='button'
                id='RejectExporter'
    >Reject</button>
    <button
    onclick='AcceptExporter(${JSON.stringify(data[i])})'
                class='btn btn-warning  exporter-button main-button'
                type='button'
                id='AcceptExporter'
    >Accept</button>
    </td>
            </tr>`;

            table2.innerHTML += row;
          } else {
            var table = document.getElementById("myTable");
            var row = `<tr>
            <td>${data[i].public_key}</td>
            <td>${data[i].nom}</td>
            <td>${data[i].localisation}</td>
            <td>${data[i].site}</td>
            </tr>`;

            table.innerHTML += row;
          }
        }
      }
      async function buildTable() {
        const response = await fetch("http://localhost:4000/api/workouts");
        const json = await response.json();

        if (response.ok) {
          console.log(json);

          Table(json);
        }
      }

      buildTable();
    </script>
  </body>
</html>
